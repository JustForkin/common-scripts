#!/bin/bash
cd /home/fusion809/GitHub/mine/packaging/OpenRA
git pull upstream bleed -q
commc=$(git -C $GHUBO/OpenRA rev-list --branches bleed --count)
commn=$(octave --eval "$commc+1" | sed "s/ans =\s*//g")
sed -i -e "s/Version: [0-9]*/Version: ${commn}/g" mods/*/mod.yaml
sed -i -e "s/[0-9]*/${commn}/g" VERSION
make clean
git add --all
git commit -m "Upstream update"
commdc=$(git rev-list --branches bleed --count)
git tag $commdc
git push origin $commdc
git push origin bleed -q
make
sudo make install-core
sudo make install-linux-shortcuts
sudo make install-linux-mime
sudo make install-man-page
sudo rm /usr/local/lib/openra/*.sh
sudo mkdir -p /var/games/openra/ModMetadata/
