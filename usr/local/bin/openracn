#!/bin/bash
while ! ping -q -w 1 -c 1 $(ip r | grep default | cut -d ' ' -f 3) > /dev/null
do
    sleep 60
done

# OpenRA RAClassic latest commit available
cd /home/fusion809/GitHub/others/raclassic

if command -v git > /dev/null 2>&1; then
    git pull origin master -q || printf "ORACErr\n" && exit
    orlv=$(git rev-list --branches master --count)
else
    printf "git is not detected, either install it or if already installed at it to the system PATH.\n" && exit
fi

# OpenRA latest packaged version
orpv=$(cat /home/fusion809/OBS/home:fusion809/openra-raclassic/openra-raclassic.spec | grep "Version:" | sed 's/Version:\s*//g')

if [[ $orpv == $orlv ]]; then
    printf "ORACï…¤ \n"
else
    printf "ORAC${orlv}\n"
fi
